The function `uv_encode` checks for the NaN values of `u` and `v` in the start before using them for encoding, this will prevent it from exceeding the bound of the buffer causing an out-of-bound vulnerability.